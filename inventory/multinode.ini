[control]
cp1 ansible_host=10.0.0.1 ansible_user=m

[compute]
cp2 ansible_host=10.0.0.2 ansible_user=m
cp3 ansible_host=10.0.0.3 ansible_user=m
cn1 ansible_host=10.0.0.4 ansible_user=m

# --- Nova (controller-side) ---
[nova-api:children]
control
[nova-scheduler:children]
control
[nova-super-conductor:children]      # <-- the real one
control
[nova-conductor:children]
control
[nova-novncproxy:children]
control
[nova-ssh:children]
control
[memcached]
cp1
# optional/disabled but harmless if present:
[nova-serialproxy:children]
control
[nova-spicehtml5proxy:children]
control

# ---- Glance service groups ----
[glance-api]
cp1

# ---- horizon ----
[horizon]
cp1

# ---- Cinder service groups ----
[cinder-api:children]
control

[cinder-scheduler:children]
control

# Put cinder-volume where the storage backend runs
# LVM-on-compute example:
[cinder-volume:children]
control
[cinder-volumes:children]
control
# If you run cinder-backup, choose the host group you want it on
[cinder-backup:children]
control

# --- Nova (compute-side) ---
[nova-libvirt:children]
compute
[nova-compute:children]
compute
[nova-compute-ironic]

# --- Neutron (networking) ---
[neutron-server]
cp1

[neutron-dhcp-agent]
cp1

[neutron-l3-agent]
cp1

[neutron-metadata-agent]
cp1

# stub out the optional groups so prechecks don't fail
[neutron-ovn-metadata-agent]
[neutron-ovn-agent]
[neutron-bgp-dragent]
[neutron-infoblox-ipam-agent]
[neutron-metering-agent]
[ironic-neutron-agent]

# (If you later choose OVS instead, swap linuxbridge agent for ovs agent)

# Keep these because some roles reference them, even if unused now:
[bifrost]
# empty is fine

[monitoring:children]
control
[storage:children]
control
[loadbalancer]
cp1
[keystone]
cp1
[mariadb]
cp1
[placement-api]
cp1
[rabbitmq]
cp1
[baremetal:children]
control
compute

[all:vars]
ansible_python_interpreter=/usr/bin/python3
